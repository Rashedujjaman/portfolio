<div class="projects-management-container">
  <header class="page-header">
    <button class="back-btn" (click)="goBack()">Back to Dashboard</button>
    <h1>Projects Management</h1>
    <button mat-raised-button color="primary" (click)="createProject()">
      <mat-icon>add</mat-icon>
      Add New Project
    </button>
  </header>

  <div class="projects-content" *ngIf="!isLoading; else loadingTemplate">
    <!-- Filters and Search -->
    <div class="filters-section">
      <div class="search-box">
        <input 
          type="text" 
          [(ngModel)]="searchTerm" 
          (ngModelChange)="filterProjects()"
          placeholder="Search projects..." 
          class="search-input">
      </div>
      
      <div class="filter-controls">
        <select [(ngModel)]="statusFilter" (ngModelChange)="filterProjects()" class="filter-select">
          <option value="">All Status</option>
          <option value="in-progress">In Progress</option>
          <option value="completed">Completed</option>
          <option value="planned">Planned</option>
          <option value="archived">Archived</option>
        </select>
        
        <select [(ngModel)]="categoryFilter" (ngModelChange)="filterProjects()" class="filter-select">
          <option value="">All Categories</option>
          <option value="web-application">Web Application</option>
          <option value="mobile-app">Mobile App</option>
          <option value="desktop-app">Desktop Application</option>
          <option value="api">API/Backend</option>
          <option value="library">Library</option>
          <option value="other">Other</option>
        </select>
      </div>
    </div>

    <!-- Projects Grid -->
    <div class="projects-grid" *ngIf="filteredProjects.length > 0; else noProjectsTemplate">
      <div class="project-card" *ngFor="let project of filteredProjects">
        <div class="project-header">
          <h3>{{ project.title }}</h3>
          <div class="project-actions">
            <button class="btn-icon" (click)="editProject(project)" title="Edit">‚úèÔ∏è</button>
            <button class="btn-icon" (click)="toggleFeatured(project)" 
                    [class.featured]="project.featured" 
                    title="{{ project.featured ? 'Remove from featured' : 'Add to featured' }}">
              ‚≠ê
            </button>
            <button class="btn-icon delete" (click)="deleteProject(project)" title="Delete">üóëÔ∏è</button>
          </div>
        </div>
        
        <div class="project-image" *ngIf="project.images && project.images.length > 0">
          <img [src]="project.images[0]" [alt]="project.title" class="project-thumbnail">
        </div>
        
        <div class="project-content">
          <p class="project-description">{{ project.shortDescription }}</p>
          
          <div class="project-meta">
            <span class="project-status" [class]="'status-' + project.status">
              {{ project.status }}
            </span>
            <span class="project-category">{{ project.category }}</span>
            <span class="project-featured" *ngIf="project.featured">‚≠ê Featured</span>
          </div>
          
          <div class="project-tech" *ngIf="project.technologies && project.technologies.length > 0">
            <span class="tech-tag" *ngFor="let tech of project.technologies.slice(0, 3)">
              {{ tech }}
            </span>
            <span class="tech-more" *ngIf="project.technologies.length > 3">
              +{{ project.technologies.length - 3 }} more
            </span>
          </div>
          
          <div class="project-links">
            <a *ngIf="project.liveUrl" [href]="project.liveUrl" target="_blank" class="link-btn demo">
              üîó Demo
            </a>
            <a *ngIf="project.githubUrl" [href]="project.githubUrl" target="_blank" class="link-btn github">
              üìÇ GitHub
            </a>
          </div>
        </div>
        
        <div class="project-footer">
          <small class="project-date">
            Updated: {{ project.updatedAt | date:'short' }}
          </small>
        </div>
      </div>
    </div>

    <ng-template #noProjectsTemplate>
      <div class="empty-state">
        <div class="empty-icon">üìÅ</div>
        <h3>No Projects Found</h3>
        <p *ngIf="hasFilters()">Try adjusting your search or filter criteria.</p>
        <p *ngIf="!hasFilters()">Create your first project to get started!</p>
        <button class="btn btn-primary" (click)="createProject()">
          Create Your First Project
        </button>
      </div>
    </ng-template>
  </div>

  <ng-template #loadingTemplate>
    <div class="loading-state">
      <p>Loading projects...</p>
    </div>
  </ng-template>
</div>

<!-- Status Messages -->
<div class="status-message" *ngIf="statusMessage">
  <div class="alert" [class.alert-success]="!hasError" [class.alert-error]="hasError">
    {{ statusMessage }}
  </div>
</div>
