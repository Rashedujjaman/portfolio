<!--
  Travel Page Template
  -------------------------------------------------------------------
  Sections:
    1. Hero (map + stats / skeleton)
    2. Countries visited grid
    3. Featured travels (image cards + slideshow indicators)
    4. Timeline (all travels)
    5. Hobbies & interests
    6. Detail modal (selected travel)
    7. Skeleton templates (ng-template fallbacks per section)
  Notes:
    - Loading state handled per section via *ngIf + skeleton template
    - Avoids full-page flash and ensures perceived performance
    - getTravelStats() kept for backward template compatibility; prefer travelStats direct.
-->
<div class="travel-page" role="main">
  <!-- Hero Section / World Map Background -->
  <section class="travel-hero">
    <div class="hero-background">
      <div class="parallax-bg world-map">
        <!-- SVG World Map (Simplified Real Outline) -->
        <svg class="world-svg" viewBox="0 0 1000 500" role="img" aria-label="Animated outline of the world map" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <pattern id="dotPattern" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
              <circle cx="10" cy="10" r="1" fill="rgba(255,255,255,0.25)"/>
            </pattern>
          </defs>
          <rect width="100%" height="100%" fill="url(#dotPattern)" opacity="0.25"/>
          <!-- Continent Outlines (lightweight simplified real-world shapes) -->
          <g class="world-outline" fill="rgba(255,255,255,0.055)" stroke-width="1.25" stroke-linejoin="round" stroke-linecap="round">
            <!-- North America -->
            <path class="continent north-america" pathLength="1000" stroke="rgba(255,255,255,0.6)"
              d="M150,95 L165,85 185,90 205,80 225,85 235,105 255,110 275,130 290,150 300,170 295,185 275,195 255,205 245,225 235,245 215,255 200,250 185,235 170,220 160,200 150,180 145,160 148,140 Z" />
            <!-- South America -->
            <path class="continent south-america" pathLength="1000" stroke="rgba(255,255,255,0.6)"
              d="M245,245 260,255 275,270 285,290 290,310 285,330 275,350 265,365 255,380 245,395 235,390 230,370 225,350 215,330 210,310 210,295 215,280 225,265 235,255 Z" />
            <!-- Europe -->
            <path class="continent europe" pathLength="1000" stroke="rgba(255,255,255,0.55)"
              d="M405,125 420,115 435,118 448,125 460,135 470,145 468,158 455,165 445,158 435,150 428,140 418,138 Z" />
            <!-- Africa -->
            <path class="continent africa" pathLength="1000" stroke="rgba(255,255,255,0.55)"
              d="M430,165 445,175 455,190 452,210 448,230 440,250 435,270 428,285 420,300 410,295 405,280 402,260 400,240 400,220 405,200 412,185 420,175 Z" />
            <!-- Asia (condensed) -->
            <path class="continent asia" pathLength="1000" stroke="rgba(255,255,255,0.55)"
              d="M470,150 490,140 515,138 540,145 560,155 580,170 600,185 610,200 620,215 615,225 600,230 585,225 570,215 555,210 545,200 535,190 525,180 515,175 500,170 488,165 478,158 Z" />
            <!-- Australia -->
            <path class="continent australia" pathLength="1000" stroke="rgba(255,255,255,0.55)"
              d="M640,285 655,280 670,285 680,295 685,310 680,325 665,330 650,325 642,315 Z" />
            <!-- Antarctica (stylized) -->
            <path class="continent antarctica" pathLength="1000" stroke="rgba(255,255,255,0.45)"
              d="M200,420 260,430 340,435 420,438 500,440 580,438 660,435 740,430 800,420 780,425 720,432 660,435 600,437 540,438 480,437 420,435 360,432 300,428 240,425 Z" />
          </g>
        </svg>
      </div>
      
      <!-- Floating Travel Icons -->
      <div class="floating-icons">
        <div class="travel-icon icon-1">✈️</div>
        <div class="travel-icon icon-2">🚂</div>
        <div class="travel-icon icon-3">📸</div>
        <div class="travel-icon icon-4">🗺️</div>
        <div class="travel-icon icon-5">🎒</div>
        <div class="travel-icon icon-6">🛳️</div>
        <div class="travel-icon icon-7">🏖️</div>
        <div class="travel-icon icon-8">🌄</div>
        <div class="travel-icon icon-9">🏕️</div>
        <div class="travel-icon icon-10">🏝️</div>
        <div class="travel-icon icon-11">🚌</div>
        <div class="travel-icon icon-12">🏞️</div>
        <div class="travel-icon icon-13">🚴‍♂️</div>
        <div class="travel-icon icon-14">🏍️</div>
        <div class="travel-icon icon-15">🚗</div>
        <div class="travel-icon icon-16">🌅</div>
      </div>
    </div>

    <div class="container">
      <div class="hero-content">
        <div class="hero-badge">
          <span class="badge-icon">🌍</span>
          <span>Travel & Lifestyle</span>
        </div>
        
        <h1 class="hero-title" aria-label="Travel and lifestyle experiences">
          <span class="title-line">Exploring the</span>
          <span class="title-line gradient-text">World</span>
        </h1>
        
        <p class="hero-description">
          A collection of adventures, cultures discovered, and memories made around the globe
        </p>

        <!-- Travel Stats (uses derived travelStats; fallback skeleton) -->
        <div class="travel-stats" *ngIf="travelStats as stats" aria-label="Travel statistics">
            <div class="stat-card">
              <div class="stat-icon">🌍</div>
              <div class="stat-content">
                <span class="stat-number">{{ stats.totalCountries }}</span>
                <span class="stat-label">Countries</span>
              </div>
            </div>
                
            <div class="stat-card" aria-label="Total trips">
              <div class="stat-icon">✈️</div>
              <div class="stat-content">
                <span class="stat-number">{{ stats.totalTravels }}</span>
                <span class="stat-label">Trips</span>
              </div>
            </div>
                
            <div class="stat-card" aria-label="Total days traveled">
              <div class="stat-icon">📅</div>
              <div class="stat-content">
                <span class="stat-number">{{ stats.totalDays }}</span>
                <span class="stat-label">Days</span>
              </div>
            </div>
                
            <div class="stat-card" aria-label="Featured trips count">
              <div class="stat-icon">⭐</div>
              <div class="stat-content">
                <span class="stat-number">{{ featuredTravels.length }}</span>
                <span class="stat-label">Featured</span>
              </div>
            </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Countries Visited -------------------------------------------------- -->
  <section class="countries-section" *ngIf="visitedCountries.length > 0">
    <div class="container">
      <div class="section-header scroll-animate">
        <h2 class="section-title">Countries Visited</h2>
        <p class="section-subtitle">Places I've been fortunate to explore</p>
      </div>

      <div class="countries-grid scroll-animate">
        <div class="country-card" 
             *ngFor="let country of visitedCountries; let i = index"
             [style.animation-delay]="i * 0.1 + 's'"
             (mouseenter)="hoveredCountry = country"
             (mouseleave)="hoveredCountry = null">
          
          <div class="country-flag">
            {{ getCountryFlag(country) }}
          </div>
          
          <div class="country-name">{{ country }}</div>
          
          <div class="country-trips">
            {{ getCountryTripCount(country) }} {{ getCountryTripText(country) }}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Travels -------------------------------------------------- -->
  <section class="featured-travels" *ngIf="featuredTravels.length > 0">
    <div class="container">
      <div class="section-header scroll-animate">
        <h2 class="section-title">Featured Adventures</h2>
        <p class="section-subtitle">Highlights from my most memorable journeys</p>
      </div>

      <div class="travels-grid scroll-animate">
        <div class="travel-card" 
             *ngFor="let travel of featuredTravels; let cardIndex = index; trackBy: trackByTravel"
             [style.animation-delay]="cardIndex * 0.2 + 's'"
             (click)="selectTravel(travel)">
          
          <div class="travel-image">
            <div class="image-slideshow" *ngIf="travel.images && travel.images.length > 0">
              <img [src]="getCurrentImage(travel, cardIndex)" [alt]="travel.title">
              <div class="slideshow-indicators" *ngIf="travel.images.length > 1">
                <span *ngFor="let img of travel.images; let imgIndex = index" 
                      class="indicator" 
                      [class.active]="imgIndex === getCurrentImageIndex(cardIndex)">
                </span>
              </div>
              <div class="slideshow-counter" *ngIf="travel.images.length > 1">
                {{ getCurrentImageIndex(cardIndex) + 1 }} / {{ travel.images.length }}
              </div>
            </div>
            <div class="no-image-placeholder" *ngIf="!travel.images || travel.images.length === 0">
              <img src="https://t4.ftcdn.net/jpg/00/65/48/25/360_F_65482539_C0ZozE5gUjCafz7Xq98WB4dW6LAhqKfs.jpg" [alt]="travel.title">
            </div>
            <div class="image-overlay">
              <div class="travel-duration">{{ travel.duration }} days</div>
              <div class="travel-flag">{{ getCountryFlag(travel.country) }}</div>
            </div>
          </div>

          <div class="travel-content">
            <div class="travel-header">
              <h3 class="travel-title">{{ travel.title }}</h3>
              <div class="travel-location">
                <span class="location-icon">📍</span>
                {{ travel.city }}, {{ travel.country }}
              </div>
            </div>

            <p class="travel-description">{{ travel.description }}</p>

            <div class="travel-highlights" *ngIf="travel.highlights && travel.highlights.length > 0">
              <div class="highlight-item" *ngFor="let highlight of travel.highlights.slice(0, 3)">
                <span class="highlight-icon">✨</span>
                <span>{{ highlight }}</span>
              </div>
              <div class="more-highlights" *ngIf="travel.highlights.length > 3">
                +{{ travel.highlights.length - 3 }} more
              </div>
            </div>

            <div class="travel-meta">
              <span class="travel-date">
                <span class="date-icon">📅</span>
                {{ formatDate(travel.visitDate) }}
              </span>
              <span class="travel-images" *ngIf="travel.images && travel.images.length > 1">
                <span class="images-icon">📸</span>
                {{ travel.images.length }} photos
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- All Travels Timeline --------------------------------------------- -->
  <section class="all-travels" *ngIf="travels.length > 0">
    <div class="container">
      <div class="section-header scroll-animate">
        <h2 class="section-title">All Adventures</h2>
        <p class="section-subtitle">Complete travel timeline</p>
      </div>

      <div class="timeline-travels scroll-animate">
        <div class="travel-timeline-item" 
             *ngFor="let travel of travels; let i = index; trackBy: trackByTravel"
             [style.animation-delay]="i * 0.1 + 's'">
          
          <div class="timeline-dot">
            <span>{{ getCountryFlag(travel.country) }}</span>
          </div>

          <div class="timeline-content" (click)="selectTravel(travel)">
            <div class="timeline-date">{{ formatDate(travel.visitDate) }}</div>
            <h4 class="timeline-title">{{ travel.title }}</h4>
            <div class="timeline-location">{{ travel.city }}, {{ travel.country }}</div>
            <div class="timeline-duration">{{ travel.duration }} days</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Hobbies & Interests ---------------------------------------------- -->
  <section class="hobbies-section" *ngIf="hobbies.length > 0">
    <div class="container">
      <div class="section-header scroll-animate">
        <h2 class="section-title">Hobbies & Interests</h2>
        <p class="section-subtitle">What I love doing in my free time</p>
      </div>

      <div class="hobbies-grid scroll-animate">
        <div class="hobby-card" 
             *ngFor="let hobby of hobbies; let i = index; trackBy: trackByHobby"
             [style.animation-delay]="i * 0.15 + 's'">
          
          <div class="hobby-icon">
            {{ getHobbyIcon(hobby.category) }}
          </div>

          <div class="hobby-content">
            <h3 class="hobby-name">{{ hobby.name }}</h3>
            <p class="hobby-description">{{ hobby.description }}</p>
            
            <div class="hobby-meta">
              <span class="hobby-category">{{ hobby.category }}</span>
              <span class="hobby-started" *ngIf="hobby.startedDate">
                Since {{ formatDate(hobby.startedDate) }}
              </span>
            </div>

            <div class="hobby-achievements" *ngIf="hobby.achievements && hobby.achievements.length > 0">
              <h5>Achievements</h5>
              <ul>
                <li *ngFor="let achievement of hobby.achievements.slice(0, 2)">
                  <span class="achievement-icon">🏆</span>
                  {{ achievement }}
                </li>
              </ul>
            </div>
          </div>

          <div class="hobby-images" *ngIf="hobby.images && hobby.images.length > 0">
            <img [src]="hobby.images[0]" [alt]="hobby.name">
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- Travel Detail Modal (conditional overlay) -->
<div class="travel-modal" *ngIf="selectedTravel" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="closeModal()">×</button>
    
    <div class="modal-header">
      <h2>{{ selectedTravel.title }}</h2>
      <div class="modal-location">
        {{ getCountryFlag(selectedTravel.country) }} {{ selectedTravel.city }}, {{ selectedTravel.country }}
      </div>
    </div>

    <div class="modal-gallery" *ngIf="selectedTravel.images && selectedTravel.images.length > 0">
      <div class="gallery-main">
        <img [src]="selectedTravel.images[currentImageIndex]" [alt]="selectedTravel.title">
        
        <button class="gallery-nav prev" (click)="prevImage()" *ngIf="selectedTravel.images.length > 1">
          ←
        </button>
        <button class="gallery-nav next" (click)="nextImage()" *ngIf="selectedTravel.images.length > 1">
          →
        </button>
      </div>

      <div class="gallery-thumbnails" *ngIf="selectedTravel.images.length > 1">
        <img *ngFor="let image of selectedTravel.images; let i = index"
             [src]="image"
             [alt]="selectedTravel.title"
             [class.active]="i === currentImageIndex"
             (click)="currentImageIndex = i">
      </div>
    </div>

    <div class="modal-body">
      <div class="modal-description">
        <p>{{ selectedTravel.description }}</p>
      </div>

      <div class="modal-details">
        <div class="detail-item">
          <span class="detail-label">Duration:</span>
          <span class="detail-value">{{ selectedTravel.duration }} days</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Visit Date:</span>
          <span class="detail-value">{{ formatDate(selectedTravel.visitDate) }}</span>
        </div>
      </div>

      <div class="modal-highlights" *ngIf="selectedTravel.highlights && selectedTravel.highlights.length > 0">
        <h4>Highlights</h4>
        <ul>
          <li *ngFor="let highlight of selectedTravel.highlights">
            <span class="highlight-icon">✨</span>
            {{ highlight }}
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- Skeleton templates removed -->
